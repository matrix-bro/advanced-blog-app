{% extends "app/base.html" %}
{% load blog_tags %}

{% block title %} Blogs {% endblock %}

{% block content %} 
    <div class="px-6 md:px-12">
        <h1 class="text-3xl lg:text-4xl border-b py-2 font-bold text-center">Most Recent (Total Posts: {% total_posts %})</h1>

        {% if tag %}
            <h2 class="text-2xl pt-8 text-center font-semibold">Posts tagged with "{{ tag.name }}"</h2>
        {% endif %}

        <div class="grid grid-cols-1 md:grid-cols-2 pt-8">
            {% for post in posts %}
                <div class="py-3 space-y-3">
                    <h2 class="text-2xl text-blue-600">
                        <a href="{{ post.get_absolute_url }}">{{ post.title }}</a>
                    </h2>

                    <p class="text-sm">
                        {% for tag in post.tags.all %}
                            <a href="{% url 'post_list_by_tag' tag.slug %}" class="hover:underline text-slate-600">{{ tag.name }}</a>
                            {% if not forloop.last %}, {% endif %}
                        {% endfor %}
                    </p>

                    <p class="italic text-gray-500">
                        Published {{ post.created_at }} by {{ post.author }}
                    </p>
                    <p>
                        {{ post.content|safe|truncatewords_html:6 }}
                    </p>
                </div>
            {% endfor %}
        </div>

        <!-- Pagination -->
        <div class="flex justify-center pt-8">
            {% include "app/blog/includes/pagination.html" with page=posts page_range=page_range %}
        </div>
    </div>


{% endblock %}
